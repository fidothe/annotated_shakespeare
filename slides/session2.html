<html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=utf-8" /><meta name="localStorage.key" content="slideno" /><title>Practical Web Applications</title><script type="text/javascript" language="javascript" src="js/jquery-1.6.2.min.js"></script><script type="text/javascript" language="javascript" src="js/jquery-ui-1.8.16.custom.min.js"></script><script type="text/javascript" language="javascript" src="js/jquery-timers-1.2.js"></script><script type="text/javascript" language="javascript" src="js/jquery.ba-hashchange.min.js"></script><script type="text/javascript" language="javascript" src="js/slides.js"></script><link type="text/css" rel="stylesheet" href="css/ui-lightness/jquery-ui-1.8.16.custom.css" /><link type="text/css" rel="stylesheet" href="css/slides.css" /></head><body><div class="foil titlefoil"><div class="page"><div class="header"><h1>Practical Web Applications</h1><h2>20 September 2012</h2></div><div class="body"><h1>Session Two</h1><div class="authorgroup"><div class="author"><h2><span class="personname"><span class="firstname">Lauren</span> <span class="surname">Wood</span></span></h2><h3><span class="orgname">Textuality Services, Inc.</span></h3></div><div class="author"><h2><span class="personname"><span class="firstname">Matt</span> <span class="surname">Patterson</span></span></h2><h3><span class="orgname">Constituent Parts, Ltd.</span></h3></div><div class="author"><h2><span class="personname"><span class="firstname">Norman </span> <span class="surname">Walsh</span></span></h2><h3><span class="orgname">MarkLogic</span></h3></div><div class="author"><h2><span class="personname"><span class="firstname">Paul</span> <span class="surname">Downey</span></span></h2><h3><span class="orgname">GDS</span></h3></div></div><div class="legalnotice"><p>Alpha by first name</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div></div></div><div class="foil"><div class="page"><div class="header"><h1>Agenda</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><ul class="toc"><li><a href="#1">Architecture</a></li><li><a href="#18">Modelling Plays for our app</a></li><li><a href="#20">Designing the URLs</a></li></ul></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div></div></div><div class="foil titlefoil foilgroup"><div class="page"><div class="header"><h1>Architecture</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">1</div></div></div><div class="foil"><div class="page"><div class="header"><h1>HTTP versus REST</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div id="R.1.2.2.2" title="Fielding has a posse" class="mediaobject"><img src="images/posse.jpg" alt="Fielding has a posse" /></div></div><div class="foil-notes"><div class="foilinset"><div id="R.1.2.2.2" title="Fielding has a posse" class="mediaobject"><img src="images/posse.jpg" alt="Fielding has a posse" /></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">2</div></div></div><div class="foil"><div class="page"><div class="header"><h1>HTTP RFC 2616</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div id="R.1.2.3.2" title="RFC 2616" class="mediaobject"><img src="images/rfc2616.png" alt="RFC 2616" /></div></div><div class="foil-notes"><div class="foilinset"><div id="R.1.2.3.2" title="RFC 2616" class="mediaobject"><img src="images/rfc2616.png" alt="RFC 2616" /></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">3</div></div></div><div class="foil"><div class="page"><div class="header"><h1>REST Cookbook</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div id="R.1.2.4.2" title="REST Cookbook" class="mediaobject"><img src="images/cookbook.jpg" alt="REST Cookbook" /></div></div><div class="foil-notes"><div class="foilinset"><div id="R.1.2.4.2" title="REST Cookbook" class="mediaobject"><img src="images/cookbook.jpg" alt="REST Cookbook" /></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">4</div></div></div><div class="foil"><div class="page"><div class="header"><h1>HTTP Verbs</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div class="programlisting wide highlight"><pre><span class="n">method</span>     <span class="n">safe</span>    <span class="n">idempotent</span>   <span class="n">semantics</span>    <span class="n">resource</span>     <span class="n">cacheable</span>
          <span class="o">-----------------------------------------------------------</span>
<span class="n">GET</span>       <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>             <span class="n">X</span>    <span class="o">|</span>
<span class="n">HEAD</span>      <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>             <span class="n">X</span>    <span class="o">|</span>
<span class="n">PUT</span>       <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">POST</span>      <span class="o">|</span>                                                    <span class="o">*</span>    <span class="o">|</span>
<span class="n">DELETE</span>    <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">OPTIONS</span>   <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>                              <span class="o">|</span>
          <span class="o">-----------------------------------------------------------</span>
<span class="n">PROPFIND</span>  <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>             <span class="o">*</span>    <span class="o">|</span>
<span class="n">PROPPATCH</span> <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">MKCOL</span>     <span class="o">|</span>             <span class="o">*</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">COPY</span>      <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">MOVE</span>      <span class="o">|</span>             ?            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">LOCK</span>      <span class="o">|</span>                          <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">UNLOCK</span>    <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">PATCH</span>     <span class="o">|</span>             <span class="o">*</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
          <span class="o">-----------------------------------------------------------</span>
      </pre></div></div><div class="foil-notes"><div class="foilinset"><div class="programlisting wide highlight"><pre><span class="n">method</span>     <span class="n">safe</span>    <span class="n">idempotent</span>   <span class="n">semantics</span>    <span class="n">resource</span>     <span class="n">cacheable</span>
          <span class="o">-----------------------------------------------------------</span>
<span class="n">GET</span>       <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>             <span class="n">X</span>    <span class="o">|</span>
<span class="n">HEAD</span>      <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>             <span class="n">X</span>    <span class="o">|</span>
<span class="n">PUT</span>       <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">POST</span>      <span class="o">|</span>                                                    <span class="o">*</span>    <span class="o">|</span>
<span class="n">DELETE</span>    <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">OPTIONS</span>   <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>                              <span class="o">|</span>
          <span class="o">-----------------------------------------------------------</span>
<span class="n">PROPFIND</span>  <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>             <span class="o">*</span>    <span class="o">|</span>
<span class="n">PROPPATCH</span> <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">MKCOL</span>     <span class="o">|</span>             <span class="o">*</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">COPY</span>      <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">MOVE</span>      <span class="o">|</span>             ?            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">LOCK</span>      <span class="o">|</span>                          <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">UNLOCK</span>    <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">PATCH</span>     <span class="o">|</span>             <span class="o">*</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
          <span class="o">-----------------------------------------------------------</span>
      </pre></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">5</div></div></div><div class="foil"><div class="page"><div class="header"><h1>Verbs in URLs make Roy cry</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div class="itemizedlist"><ul><li><p><code class="code">/getCustomerProfile</code></p></li><li><p><code class="code">/deleteTheArticle</code></p></li><li><p><code class="code">/fireNuclearMissiles</code></p></li></ul></div></div><div class="foil-notes"><div class="foilinset"><div class="itemizedlist"><ul><li><p><code class="code">/getCustomerProfile</code></p></li><li><p><code class="code">/deleteTheArticle</code></p></li><li><p><code class="code">/fireNuclearMissiles</code></p></li></ul></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">6</div></div></div><div class="foil"><div class="page"><div class="header"><h1>URLs are nouns!</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div class="itemizedlist"><ul><li><p><code class="code">/cities</code></p></li><li><p><code class="code">/cities/London</code></p><p><code class="code">/cities/Paris</code></p><p><code class="code">/cities/Moscow</code></p></li></ul></div></div><div class="foil-notes"><div class="foilinset"><div class="itemizedlist"><ul><li><p><code class="code">/cities</code></p></li><li><p><code class="code">/cities/London</code></p><p><code class="code">/cities/Paris</code></p><p><code class="code">/cities/Moscow</code></p></li></ul></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">7</div></div></div><div class="foil"><div class="page"><div class="header"><h1>GET</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div class="programlisting highlight"><pre class="http"><span class="err">http://www.flickr.com/search?q=dog&amp;w=commons&amp;m=text</span></pre></div><div class="programlisting highlight"><pre class="http"><span class="err">GET /search?q=dog&amp;w=commons&amp;m=text</span>
<span class="err">Host: http://www.flickr.com</span></pre></div></div><div class="foil-notes"><div class="foilinset"><div class="programlisting highlight"><pre class="http"><span class="err">http://www.flickr.com/search?q=dog&amp;w=commons&amp;m=text</span></pre></div><div class="programlisting highlight"><pre class="http"><span class="err">GET /search?q=dog&amp;w=commons&amp;m=text</span>
<span class="err">Host: http://www.flickr.com</span></pre></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">8</div></div></div><div class="foil"><div class="page"><div class="header"><h1>HEAD</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><p>same as GET, but no content returned ..</p></div><div class="foil-notes"><div class="foilinset"><p>same as GET, but no content returned ..</p></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">9</div></div></div><div class="foil"><div class="page"><div class="header"><h1>POST</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><p>Talk to an agent</p><div class="programlisting highlight"><pre class="http"><span class="err">POST /box-office</span>
<span class="err">Host: http://www.flickr.com</span>
<span class="err">Content-Type: application/x-www-form-urlencoded</span>

<span class="err">date=20120912&amp;performance=evening&amp;number=4</span></pre></div></div><div class="foil-notes"><div class="foilinset"><p>Talk to an agent</p><div class="programlisting highlight"><pre class="http"><span class="err">POST /box-office</span>
<span class="err">Host: http://www.flickr.com</span>
<span class="err">Content-Type: application/x-www-form-urlencoded</span>

<span class="err">date=20120912&amp;performance=evening&amp;number=4</span></pre></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">10</div></div></div><div class="foil"><div class="page"><div class="header"><h1>PUT</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><p>Replace the content</p><div class="programlisting highlight"><pre class="http"><span class="err">PUT /box-office</span>
<span class="err">Host: http://www.flickr.com</span>
<span class="err">Content-Type: application/x-www-form-urlencoded</span>

<span class="err">date=20120912&amp;performance=evening&amp;number=4</span></pre></div></div><div class="foil-notes"><div class="foilinset"><p>Replace the content</p><div class="programlisting highlight"><pre class="http"><span class="err">PUT /box-office</span>
<span class="err">Host: http://www.flickr.com</span>
<span class="err">Content-Type: application/x-www-form-urlencoded</span>

<span class="err">date=20120912&amp;performance=evening&amp;number=4</span></pre></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">11</div></div></div><div class="foil"><div class="page"><div class="header"><h1>DELETE</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><p>Delete the resource</p><div class="programlisting highlight"><pre class="http"><span class="err">DELETE /box-office</span>
<span class="err">Host: http://www.flickr.com</span></pre></div></div><div class="foil-notes"><div class="foilinset"><p>Delete the resource</p><div class="programlisting highlight"><pre class="http"><span class="err">DELETE /box-office</span>
<span class="err">Host: http://www.flickr.com</span></pre></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">12</div></div></div><div class="foil"><div class="page"><div class="header"><h1>Caching (Dates)</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div class="programlisting highlight"><pre class="http"><span class="err">If-Modified-Since:  Friday, 31-Dec-11 23:59:59 GMT</span></pre></div><div class="programlisting highlight"><pre class="http"><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">304</span> <span class="ne">Not Modified</span></pre></div></div><div class="foil-notes"><div class="foilinset"><div class="programlisting highlight"><pre class="http"><span class="err">If-Modified-Since:  Friday, 31-Dec-11 23:59:59 GMT</span></pre></div><div class="programlisting highlight"><pre class="http"><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">304</span> <span class="ne">Not Modified</span></pre></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">13</div></div></div><div class="foil"><div class="page"><div class="header"><h1>Caching (Content)</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div class="programlisting highlight"><pre class="http"><span class="err">ETag: "686897696a7c876b7e"</span></pre></div><div class="programlisting highlight"><pre class="http"><span class="err">If-None-Match: "686897696a7c876b7e"</span></pre></div><div class="programlisting highlight"><pre class="http"><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">304</span> <span class="ne">Not Modified</span></pre></div></div><div class="foil-notes"><div class="foilinset"><div class="programlisting highlight"><pre class="http"><span class="err">ETag: "686897696a7c876b7e"</span></pre></div><div class="programlisting highlight"><pre class="http"><span class="err">If-None-Match: "686897696a7c876b7e"</span></pre></div><div class="programlisting highlight"><pre class="http"><span class="kr">HTTP</span><span class="o">/</span><span class="m">1.1</span> <span class="m">304</span> <span class="ne">Not Modified</span></pre></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">14</div></div></div><div class="foil"><div class="page"><div class="header"><h1>HTTP Verbs</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div class="programlisting wide highlight"><pre><span class="n">method</span>     <span class="n">safe</span>    <span class="n">idempotent</span>   <span class="n">semantics</span>    <span class="n">resource</span>     <span class="n">cacheable</span>
          <span class="o">-----------------------------------------------------------</span>
<span class="n">GET</span>       <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>             <span class="n">X</span>    <span class="o">|</span>
<span class="n">HEAD</span>      <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>             <span class="n">X</span>    <span class="o">|</span>
<span class="n">PUT</span>       <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">POST</span>      <span class="o">|</span>                                                    <span class="o">*</span>    <span class="o">|</span>
<span class="n">DELETE</span>    <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">OPTIONS</span>   <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>                              <span class="o">|</span>
          <span class="o">-----------------------------------------------------------</span>
<span class="n">PROPFIND</span>  <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>             <span class="o">*</span>    <span class="o">|</span>
<span class="n">PROPPATCH</span> <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">MKCOL</span>     <span class="o">|</span>             <span class="o">*</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">COPY</span>      <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">MOVE</span>      <span class="o">|</span>             ?            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">LOCK</span>      <span class="o">|</span>                          <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">UNLOCK</span>    <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">PATCH</span>     <span class="o">|</span>             <span class="o">*</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
          <span class="o">-----------------------------------------------------------</span>
      </pre></div></div><div class="foil-notes"><div class="foilinset"><div class="programlisting wide highlight"><pre><span class="n">method</span>     <span class="n">safe</span>    <span class="n">idempotent</span>   <span class="n">semantics</span>    <span class="n">resource</span>     <span class="n">cacheable</span>
          <span class="o">-----------------------------------------------------------</span>
<span class="n">GET</span>       <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>             <span class="n">X</span>    <span class="o">|</span>
<span class="n">HEAD</span>      <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>             <span class="n">X</span>    <span class="o">|</span>
<span class="n">PUT</span>       <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">POST</span>      <span class="o">|</span>                                                    <span class="o">*</span>    <span class="o">|</span>
<span class="n">DELETE</span>    <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">OPTIONS</span>   <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>                              <span class="o">|</span>
          <span class="o">-----------------------------------------------------------</span>
<span class="n">PROPFIND</span>  <span class="o">|</span>  <span class="n">X</span>          <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>             <span class="o">*</span>    <span class="o">|</span>
<span class="n">PROPPATCH</span> <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">MKCOL</span>     <span class="o">|</span>             <span class="o">*</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">COPY</span>      <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">MOVE</span>      <span class="o">|</span>             ?            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">LOCK</span>      <span class="o">|</span>                          <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">UNLOCK</span>    <span class="o">|</span>             <span class="n">X</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
<span class="n">PATCH</span>     <span class="o">|</span>             <span class="o">*</span>            <span class="n">X</span>           <span class="n">X</span>                  <span class="o">|</span>
          <span class="o">-----------------------------------------------------------</span>
      </pre></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">15</div></div></div><div class="foil"><div class="page"><div class="header"><h1>Representations</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><p>The type of content is returned as a media-type</p><div class="programlisting highlight"><pre class="http"><span class="err">      http://progressiveenhancement.net/</span></pre></div></div><div class="foil-notes"><div class="foilinset"><p>The type of content is returned as a media-type</p><div class="programlisting highlight"><pre class="http"><span class="err">      http://progressiveenhancement.net/</span></pre></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">16</div></div></div><div class="foil"><div class="page"><div class="header"><h1>Content Negotiation</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div class="programlisting highlight"><pre class="http"><span class="err">Accept: */*</span></pre></div><div class="programlisting highlight"><pre class="http"><span class="err">Accept-Language: de; q=1.0, en; q=0.5</span>
<span class="err">Accept: text/html; q=1.0, text/*; q=0.8, image/gif; q=0.6, image/jpeg; q=0.6, image/*; q=0.5, */*; q=0.1</span></pre></div></div><div class="foil-notes"><div class="foilinset"><div class="programlisting highlight"><pre class="http"><span class="err">Accept: */*</span></pre></div><div class="programlisting highlight"><pre class="http"><span class="err">Accept-Language: de; q=1.0, en; q=0.5</span>
<span class="err">Accept: text/html; q=1.0, text/*; q=0.8, image/gif; q=0.6, image/jpeg; q=0.6, image/*; q=0.5, */*; q=0.1</span></pre></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">17</div></div></div><div class="foil titlefoil foilgroup"><div class="page"><div class="header"><h1>Modelling Plays for our app</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">18</div></div></div><div class="foil"><div class="page"><div class="header"><h1>What's in a play?</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><p>Let's consider what the most basic parts of the play are:</p><div class="itemizedlist"><ul><li><p>The title of the play</p></li><li><p>Who wrote it</p></li><li><p>How it's broken up into acts and scenes</p></li><li><p>Characters</p></li><li><p>The text itself</p></li></ul></div><p>What does the data we have make easier for us?</p></div><div class="foil-notes"><div class="foilinset"><p>Let's consider what the most basic parts of the play are:</p><div class="itemizedlist"><ul><li><p>The title of the play</p></li><li><p>Who wrote it</p></li><li><p>How it's broken up into acts and scenes</p></li><li><p>Characters</p></li><li><p>The text itself</p></li></ul></div><p>What does the data we have make easier for us?</p></div><div class="speakernotes">
        <p>Before we begin just blindly throwing things around, we should stop and consider
          what data we actually have to hand, how it's structured, what we want from it, and
          how easy it is to get things out of it.</p>
        <p>The play XML gives us some things twice, like the title and author. We need to
          pick one, but it's pretty clear what they are.</p>
        <p>The structure of the play is less clear, because the markup is primarily aimed
          at preserving the printed characteristics of the manuscript. If we look closely
          we can see that although there are no explicit 'Act' or 'Scene' elements the &lt;head&gt;
          element is only used to mark the title of the play (its third appearance) and 
          what look like Act or Scene titles.</p>
        <p>Characters are called out, but just as strings: not with ID refs or anything 
          unambiguous. For ease, I think we'll have to ignore those.</p>
        <p>The XML contains element and text content for all the various bits of metadata 
          and elizabethan typesetting notes, but the play's text is unambigously within the
          &lt;text&gt; element, and the metadata's all outside that, so that's alright.</p>
      </div></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">19</div></div></div><div class="foil titlefoil foilgroup"><div class="page"><div class="header"><h1>Designing the URLs</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">20</div></div></div><div class="foil"><div class="page"><div class="header"><h1>What resources are there?</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><p>At first glance</p><div class="itemizedlist"><ul><li><p>Play</p></li><li><p>Act</p></li></ul></div></div><div class="foil-notes"><div class="foilinset"><p>At first glance</p><div class="itemizedlist"><ul><li><p>Play</p></li><li><p>Act</p></li></ul></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">21</div></div></div><div class="foil"><div class="page"><div class="header"><h1>How should they be exposed?</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><p>We actually need more than we thought</p><div class="itemizedlist"><ul><li><p>A list of all Plays</p></li><li><p>An individual Play</p></li><li><p>An Act of a Play</p></li></ul></div></div><div class="foil-notes"><div class="foilinset"><p>We actually need more than we thought</p><div class="itemizedlist"><ul><li><p>A list of all Plays</p></li><li><p>An individual Play</p></li><li><p>An Act of a Play</p></li></ul></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">22</div></div></div><div class="foil"><div class="page"><div class="header"><h1>The URLs</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div class="itemizedlist"><ul><li><p><code class="code">/</code></p></li><li><p><code class="code">/plays/caesar</code></p></li><li><p><code class="code">/plays/caesar/act/1</code></p></li></ul></div></div><div class="foil-notes"><div class="foilinset"><div class="itemizedlist"><ul><li><p><code class="code">/</code></p></li><li><p><code class="code">/plays/caesar</code></p></li><li><p><code class="code">/plays/caesar/act/1</code></p></li></ul></div></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">23</div></div></div><div class="foil"><div class="page"><div class="header"><h1>Routing in Sinatra</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div class="programlisting highlight"><pre class="ruby"><span class="nb">require</span> <span class="s1">'sinatra/base'</span>

<span class="k">class</span> <span class="nc">AnnotatedShakespeare</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">get</span> <span class="s1">'/'</span> <span class="k">do</span>
  <span class="k">end</span>
  <span class="n">get</span> <span class="s1">'/plays/:id'</span> <span class="k">do</span>
  <span class="k">end</span>
  <span class="n">get</span> <span class="s1">'/plays/:id/act/:act_number'</span> <span class="k">do</span>
  <span class="k">end</span>
<span class="k">end</span></pre></div><p><code class="code">lib/annotated_shakespeare.rb</code></p></div><div class="foil-notes"><div class="foilinset"><div class="programlisting highlight"><pre class="ruby"><span class="nb">require</span> <span class="s1">'sinatra/base'</span>

<span class="k">class</span> <span class="nc">AnnotatedShakespeare</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">get</span> <span class="s1">'/'</span> <span class="k">do</span>
  <span class="k">end</span>
  <span class="n">get</span> <span class="s1">'/plays/:id'</span> <span class="k">do</span>
  <span class="k">end</span>
  <span class="n">get</span> <span class="s1">'/plays/:id/act/:act_number'</span> <span class="k">do</span>
  <span class="k">end</span>
<span class="k">end</span></pre></div><p><code class="code">lib/annotated_shakespeare.rb</code></p></div><div class="speakernotes">
        <p>Sinatra uses methods named for HTTP methods to declare routes.</p>
        <p>These are all GET routes. The <code class="code">:param_name</code> sections in the URL 
          patterns are placeholders for variable parts of the URL, e.g. <code class="code">/plays/caesar</code>
          or <code class="code">/plays/hamlet</code> will both match <code class="code">get "/plays/:id"</code>, and
          <code class="code">caesar</code> or <code class="code">hamlet</code> will be accessible as a parameter named
          <code class="code">:id</code>.</p>
      </div></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">24</div></div></div><div class="foil"><div class="page"><div class="header"><h1>Holes in the URI space</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><p>With the holes that leaves in the URL space, we probably also need:</p><div class="itemizedlist"><ul><li><p><code class="code">/plays</code></p></li><li><p><code class="code">/plays/:id/act</code></p></li></ul></div></div><div class="foil-notes"><div class="foilinset"><p>With the holes that leaves in the URL space, we probably also need:</p><div class="itemizedlist"><ul><li><p><code class="code">/plays</code></p></li><li><p><code class="code">/plays/:id/act</code></p></li></ul></div></div><div class="speakernotes">
        <p>Before we add these extra routes in, it's worth trying out the first set.</p>
        <p>If you were to put the URL <code class="code">/plays/caesar/act/1</code> in to your browser
          and start to hack off chunks of the URL then you'll see 404s at
          <code class="code">/plays/caesar/act</code> and <code class="code">/plays</code>.</p>
        <p>These extra routes avoid that by redirecting the browser to the next level up</p>
      </div></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">25</div></div></div><div class="foil"><div class="page"><div class="header"><h1>Routing in Sinatra</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div class="programlisting highlight"><pre class="ruby"><span class="nb">require</span> <span class="s1">'sinatra/base'</span>

<span class="k">class</span> <span class="nc">AnnotatedShakespeare</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">get</span> <span class="s1">'/'</span> <span class="k">do</span>
  <span class="k">end</span>
  <span class="n">get</span> <span class="s1">'/plays'</span> <span class="k">do</span>
    <span class="n">redirect</span> <span class="n">to</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="n">get</span> <span class="s1">'/plays/:id'</span> <span class="k">do</span>
  <span class="k">end</span>
  <span class="n">get</span> <span class="s1">'/plays/:id/act'</span> <span class="k">do</span>
    <span class="n">redirect</span> <span class="n">to</span><span class="p">(</span><span class="s2">"/plays/</span><span class="si">#{</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="n">get</span> <span class="s1">'/plays/:id/act/:act_number'</span> <span class="k">do</span>
  <span class="k">end</span>
<span class="k">end</span></pre></div><p><code class="code">lib/annotated_shakespeare.rb</code></p></div><div class="foil-notes"><div class="foilinset"><div class="programlisting highlight"><pre class="ruby"><span class="nb">require</span> <span class="s1">'sinatra/base'</span>

<span class="k">class</span> <span class="nc">AnnotatedShakespeare</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">get</span> <span class="s1">'/'</span> <span class="k">do</span>
  <span class="k">end</span>
  <span class="n">get</span> <span class="s1">'/plays'</span> <span class="k">do</span>
    <span class="n">redirect</span> <span class="n">to</span><span class="p">(</span><span class="s1">'/'</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="n">get</span> <span class="s1">'/plays/:id'</span> <span class="k">do</span>
  <span class="k">end</span>
  <span class="n">get</span> <span class="s1">'/plays/:id/act'</span> <span class="k">do</span>
    <span class="n">redirect</span> <span class="n">to</span><span class="p">(</span><span class="s2">"/plays/</span><span class="si">#{</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span>
  <span class="k">end</span>
  <span class="n">get</span> <span class="s1">'/plays/:id/act/:act_number'</span> <span class="k">do</span>
  <span class="k">end</span>
<span class="k">end</span></pre></div><p><code class="code">lib/annotated_shakespeare.rb</code></p></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">26</div></div></div><div class="foil"><div class="page"><div class="header"><h1>Populating those views</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><p>Let's put some static data into <code class="code">annotated_shakespeare.rb</code> and wire up some basic views so we can see the basic moving parts in motion.</p><div class="programlisting highlight"><pre class="ruby"><span class="c1"># encoding: utf-8</span>
<span class="nb">require</span> <span class="s1">'sinatra/base'</span>
<span class="no">ROOT_DIR</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s1">'../../'</span><span class="p">,</span> <span class="bp">__FILE__</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">AnnotatedShakespeare</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">set</span> <span class="ss">:views</span><span class="p">,</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s1">'views'</span><span class="p">,</span> <span class="no">ROOT_DIR</span><span class="p">)</span>
  <span class="n">set</span> <span class="ss">:public_folder</span><span class="p">,</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s1">'public'</span><span class="p">,</span> <span class="no">ROOT_DIR</span><span class="p">)</span>

  <span class="n">get</span> <span class="s1">'/'</span> <span class="k">do</span>
    <span class="vi">@title</span> <span class="o">=</span> <span class="s2">"Plays of William Shakespeare"</span>
    <span class="vi">@plays</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'julius'</span> <span class="o">=&gt;</span> <span class="s1">'Julius Caesar'</span><span class="p">,</span> 
              <span class="s1">'richard'</span> <span class="o">=&gt;</span> <span class="s1">'Richard II'</span><span class="p">}</span>
    <span class="n">erb</span> <span class="ss">:index</span>
  <span class="k">end</span>
  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span></pre></div><p><code class="code">lib/annotated_shakespeare.rb</code></p></div><div class="foil-notes"><div class="foilinset"><p>Let's put some static data into <code class="code">annotated_shakespeare.rb</code> and wire up some basic views so we can see the basic moving parts in motion.</p><div class="programlisting highlight"><pre class="ruby"><span class="c1"># encoding: utf-8</span>
<span class="nb">require</span> <span class="s1">'sinatra/base'</span>
<span class="no">ROOT_DIR</span> <span class="o">=</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s1">'../../'</span><span class="p">,</span> <span class="bp">__FILE__</span><span class="p">)</span>
<span class="k">class</span> <span class="nc">AnnotatedShakespeare</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">set</span> <span class="ss">:views</span><span class="p">,</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s1">'views'</span><span class="p">,</span> <span class="no">ROOT_DIR</span><span class="p">)</span>
  <span class="n">set</span> <span class="ss">:public_folder</span><span class="p">,</span> <span class="no">File</span><span class="o">.</span><span class="n">expand_path</span><span class="p">(</span><span class="s1">'public'</span><span class="p">,</span> <span class="no">ROOT_DIR</span><span class="p">)</span>

  <span class="n">get</span> <span class="s1">'/'</span> <span class="k">do</span>
    <span class="vi">@title</span> <span class="o">=</span> <span class="s2">"Plays of William Shakespeare"</span>
    <span class="vi">@plays</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'julius'</span> <span class="o">=&gt;</span> <span class="s1">'Julius Caesar'</span><span class="p">,</span> 
              <span class="s1">'richard'</span> <span class="o">=&gt;</span> <span class="s1">'Richard II'</span><span class="p">}</span>
    <span class="n">erb</span> <span class="ss">:index</span>
  <span class="k">end</span>
  <span class="o">.</span><span class="n">.</span><span class="o">.</span>
<span class="k">end</span></pre></div><p><code class="code">lib/annotated_shakespeare.rb</code></p></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">27</div></div></div><div class="foil"><div class="page"><div class="header"><h1>Populating those views</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div class="programlisting highlight"><pre class="html+erb"><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@plays</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">url_slug</span><span class="p">,</span> <span class="n">title</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">&lt;%=</span> <span class="n">url</span><span class="p">(</span><span class="s2">"/plays/</span><span class="si">#{</span><span class="n">url_slug</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span></pre></div><p><code class="code">views/index.erb</code></p></div><div class="foil-notes"><div class="foilinset"><div class="programlisting highlight"><pre class="html+erb"><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;ul&gt;</span>
  <span class="cp">&lt;%</span> <span class="vi">@plays</span><span class="o">.</span><span class="n">each</span> <span class="k">do</span> <span class="o">|</span><span class="n">url_slug</span><span class="p">,</span> <span class="n">title</span><span class="o">|</span> <span class="cp">%&gt;</span>
    <span class="nt">&lt;li&gt;&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">&lt;%=</span> <span class="n">url</span><span class="p">(</span><span class="s2">"/plays/</span><span class="si">#{</span><span class="n">url_slug</span><span class="si">}</span><span class="s2">"</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
      <span class="cp">&lt;%=</span> <span class="n">title</span> <span class="cp">%&gt;</span><span class="nt">&lt;/a&gt;</span>
    <span class="nt">&lt;/li&gt;</span>
  <span class="cp">&lt;%</span> <span class="k">end</span> <span class="cp">%&gt;</span>
<span class="nt">&lt;/ul&gt;</span></pre></div><p><code class="code">views/index.erb</code></p></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">28</div></div></div><div class="foil"><div class="page"><div class="header"><h1>Populating those views</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><a href="javascript:clicknav('next')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></a></div><div class="foil-body"><div class="programlisting highlight"><pre class="ruby"><span class="k">class</span> <span class="nc">AnnotatedShakespeare</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">get</span> <span class="s1">'/plays/:id'</span> <span class="k">do</span>
    <span class="n">plays</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'julius'</span> <span class="o">=&gt;</span> <span class="s1">'Julius Caesar'</span><span class="p">,</span>
             <span class="s1">'richard'</span> <span class="o">=&gt;</span> <span class="s1">'Richard II'</span><span class="p">}</span>
    <span class="vi">@play</span> <span class="o">=</span> <span class="n">plays</span><span class="o">[</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]]</span>
    <span class="vi">@title</span> <span class="o">=</span> <span class="vi">@play</span>
    <span class="vi">@url_slug</span> <span class="o">=</span> <span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]</span>
    <span class="n">erb</span> <span class="ss">:play_index</span>
  <span class="k">end</span>
<span class="k">end</span></pre></div><p><code class="code">lib/annotated_shakespeare.rb</code></p><div class="programlisting highlight"><pre class="html+erb"><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@play</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">&lt;%=</span> <span class="n">url</span><span class="p">(</span><span class="s2">"/plays/</span><span class="si">#{</span><span class="vi">@url_slug</span><span class="si">}</span><span class="s2">/act/1"</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
    Act 1
  <span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/p&gt;</span></pre></div><p><code class="code">views/play_index.erb</code></p></div><div class="foil-notes"><div class="foilinset"><div class="programlisting highlight"><pre class="ruby"><span class="k">class</span> <span class="nc">AnnotatedShakespeare</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">get</span> <span class="s1">'/plays/:id'</span> <span class="k">do</span>
    <span class="n">plays</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'julius'</span> <span class="o">=&gt;</span> <span class="s1">'Julius Caesar'</span><span class="p">,</span>
             <span class="s1">'richard'</span> <span class="o">=&gt;</span> <span class="s1">'Richard II'</span><span class="p">}</span>
    <span class="vi">@play</span> <span class="o">=</span> <span class="n">plays</span><span class="o">[</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]]</span>
    <span class="vi">@title</span> <span class="o">=</span> <span class="vi">@play</span>
    <span class="vi">@url_slug</span> <span class="o">=</span> <span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]</span>
    <span class="n">erb</span> <span class="ss">:play_index</span>
  <span class="k">end</span>
<span class="k">end</span></pre></div><p><code class="code">lib/annotated_shakespeare.rb</code></p><div class="programlisting highlight"><pre class="html+erb"><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@play</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span>
<span class="nt">&lt;p&gt;</span>
  <span class="nt">&lt;a</span> <span class="na">href=</span><span class="s">"</span><span class="cp">&lt;%=</span> <span class="n">url</span><span class="p">(</span><span class="s2">"/plays/</span><span class="si">#{</span><span class="vi">@url_slug</span><span class="si">}</span><span class="s2">/act/1"</span><span class="p">)</span> <span class="cp">%&gt;</span><span class="s">"</span><span class="nt">&gt;</span>
    Act 1
  <span class="nt">&lt;/a&gt;</span>
<span class="nt">&lt;/p&gt;</span></pre></div><p><code class="code">views/play_index.erb</code></p></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">29</div></div></div><div class="foil"><div class="page"><div class="header"><h1>Populating those views</h1></div><div class="body"><div class="clicknav"><a href="javascript:clicknav('prev')"><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Prev]" /></a><img src="http://docbook.github.com/release/2.0.3/base/../slides/img/transparent.gif" alt="[Next]" /></div><div class="foil-body"><div class="programlisting highlight"><pre class="ruby"><span class="k">class</span> <span class="nc">AnnotatedShakespeare</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">get</span> <span class="s1">'/plays/:id/act/:act_number'</span> <span class="k">do</span>
    <span class="n">plays</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'julius'</span> <span class="o">=&gt;</span> <span class="s1">'Julius Caesar'</span><span class="p">,</span> 
             <span class="s1">'richard'</span> <span class="o">=&gt;</span> <span class="s1">'Richard II'</span><span class="p">}</span>
    <span class="vi">@play</span> <span class="o">=</span> <span class="n">plays</span><span class="o">[</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]]</span>
    <span class="vi">@act</span> <span class="o">=</span> <span class="n">params</span><span class="o">[</span><span class="ss">:act_number</span><span class="o">]</span>
    <span class="n">erb</span> <span class="ss">:show</span>
  <span class="k">end</span>
<span class="k">end</span></pre></div><p><code class="code">lib/annotated_shakespeare.rb</code></p><div class="programlisting highlight"><pre class="html+erb"><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@play</span> <span class="cp">%&gt;</span>, Act <span class="cp">&lt;%=</span> <span class="vi">@act</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span></pre></div><p><code class="code">views/play_index.erb</code></p></div><div class="foil-notes"><div class="foilinset"><div class="programlisting highlight"><pre class="ruby"><span class="k">class</span> <span class="nc">AnnotatedShakespeare</span> <span class="o">&lt;</span> <span class="no">Sinatra</span><span class="o">::</span><span class="no">Base</span>
  <span class="n">get</span> <span class="s1">'/plays/:id/act/:act_number'</span> <span class="k">do</span>
    <span class="n">plays</span> <span class="o">=</span> <span class="p">{</span><span class="s1">'julius'</span> <span class="o">=&gt;</span> <span class="s1">'Julius Caesar'</span><span class="p">,</span> 
             <span class="s1">'richard'</span> <span class="o">=&gt;</span> <span class="s1">'Richard II'</span><span class="p">}</span>
    <span class="vi">@play</span> <span class="o">=</span> <span class="n">plays</span><span class="o">[</span><span class="n">params</span><span class="o">[</span><span class="ss">:id</span><span class="o">]]</span>
    <span class="vi">@act</span> <span class="o">=</span> <span class="n">params</span><span class="o">[</span><span class="ss">:act_number</span><span class="o">]</span>
    <span class="n">erb</span> <span class="ss">:show</span>
  <span class="k">end</span>
<span class="k">end</span></pre></div><p><code class="code">lib/annotated_shakespeare.rb</code></p><div class="programlisting highlight"><pre class="html+erb"><span class="nt">&lt;h1&gt;</span><span class="cp">&lt;%=</span> <span class="vi">@play</span> <span class="cp">%&gt;</span>, Act <span class="cp">&lt;%=</span> <span class="vi">@act</span> <span class="cp">%&gt;</span><span class="nt">&lt;/h1&gt;</span></pre></div><p><code class="code">views/play_index.erb</code></p></div><p>No speaker notes for this foil.</p></div></div></div><div class="footer"><div class="license">Licensed under a Creative Commons Attribution-
  <br />Noncommercial-Share Alike 3.0 Unported License</div><div class="content">www.xmlsummerschool.com</div><div class="foilnumber">30</div></div></div></body></html>